name: Notification on Discord the push commits
run-name: Notification push commits
on:
  push:
  pull_request:
    types: [opened, closed]

jobs:
  Notify-Push:
    runs-on: ubuntu-latest
    if: ${{ github.event_name == 'push' }}
    steps:
      - name: Discord notification
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        uses: Ilshidur/action-discord@0.3.2
        with:
          args: |
            ğŸš€ **Nuevo push detectado**
            ğŸ‘¤ Usuario: {{ EVENT_PAYLOAD.pusher.name }}
            ğŸ“¦ Repositorio: {{ EVENT_PAYLOAD.repository.full_name }}
            ğŸŒ¿ Rama: {{ EVENT_PAYLOAD.ref }}
            ğŸ’¬ Ãšltimo commit: {{ EVENT_PAYLOAD.head_commit.message }}
            â° Tiempo del commit: {{ EVENT_PAYLOAD.head_commit.timestamp }}
          DISCORD_USERNAME: 'Github BOT'

  Notify-PR:
    runs-on: ubuntu-latest
    if: ${{ github.event_name == 'pull_request' }}
    steps:
      - name: Discord notification
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        uses: Ilshidur/action-discord@0.3.2
        with:
          args: |
            ğŸ”” **Pull Request detectado**
            ğŸ‘¤ Autor: {{ EVENT_PAYLOAD.pull_request.user.login }}
            ğŸ“¦ Repositorio: {{ EVENT_PAYLOAD.repository.full_name }}
            ğŸŒ¿ Rama origen: {{ EVENT_PAYLOAD.pull_request.head.ref }}
            ğŸŒ¿ Rama destino: {{ EVENT_PAYLOAD.pull_request.base.ref }}
            ğŸ“ TÃ­tulo: {{ EVENT_PAYLOAD.pull_request.title }}
            ğŸ“Œ Estado: {{ EVENT_PAYLOAD.action }}
          DISCORD_USERNAME: 'Github BOT'
